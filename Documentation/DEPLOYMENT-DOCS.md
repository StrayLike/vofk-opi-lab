# üöÄ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –†–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è (Deployment Guide)

–¶–µ–π –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—É—î –ø—Ä–æ—Ü–µ—Å –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è, –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –≤–µ–±–∑–∞—Å—Ç–æ—Å—É–Ω–∫—É **Stardew Valley Fan Hub**. –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –æ—Ö–æ–ø–ª—é—î —è–∫ –ª–æ–∫–∞–ª—å–Ω–∏–π –∑–∞–ø—É—Å–∫ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é Docker, —Ç–∞–∫ —ñ –¥–µ–ø–ª–æ–π–º–µ–Ω—Ç —É —Ö–º–∞—Ä–Ω–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ.

---

## üñ•Ô∏è 1. –°–∏—Å—Ç–µ–º–Ω—ñ –í–∏–º–æ–≥–∏ (Prerequisites)

–ü–µ—Ä–µ–¥ –ø–æ—á–∞—Ç–∫–æ–º —Ä–æ–±–æ—Ç–∏ –ø–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –Ω–∞ –≤–∞—à–æ–º—É –∫–æ–º–ø'—é—Ç–µ—Ä—ñ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ:

1.  **Git** (–¥–ª—è –∫–ª–æ–Ω—É–≤–∞–Ω–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é).
2.  **Docker Desktop** (–≤–µ—Ä—Å—ñ—è 20.10 –∞–±–æ –Ω–æ–≤—ñ—à–∞).
3.  **Docker Compose** (–∑–∞–∑–≤–∏—á–∞–π –π–¥–µ –≤ –∫–æ–º–ø–ª–µ–∫—Ç—ñ –∑ Docker Desktop).

---

## üì• 2. –õ–æ–∫–∞–ª—å–Ω–µ –†–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è (Localhost)

–¶–µ–π –º–µ—Ç–æ–¥ –Ω–∞–π–∫—Ä–∞—â–µ –ø—ñ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è —Ä–æ–∑—Ä–æ–±–∫–∏, —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó –ø—Ä–æ—î–∫—Ç—É –Ω–∞ –≤–ª–∞—Å–Ω–æ–º—É –Ω–æ—É—Ç–±—É—Ü—ñ.

### –ö—Ä–æ–∫ 1: –û—Ç—Ä–∏–º–∞–Ω–Ω—è –∫–æ–¥—É
–ö–ª–æ–Ω—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π –∑ GitHub:

```bash
git clone [https://github.com/StrayLike/vofk-opi-lab.git](https://github.com/StrayLike/vofk-opi-lab.git)
cd vofk-opi-lab

```

###–ö—Ä–æ–∫ 2: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –æ—Ç–æ—á–µ–Ω–Ω—è (.env)–°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `.env` —É –∫–æ—Ä–µ–Ω—ñ –ø—Ä–æ—î–∫—Ç—É. –í–∏ –º–æ–∂–µ—Ç–µ —Å–∫–æ–ø—ñ—é–≤–∞—Ç–∏ –ø—Ä–∏–∫–ª–∞–¥:

```bash
cp .env.example .env

```

**–û–±–æ–≤'—è–∑–∫–æ–≤–æ –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ –≤–º—ñ—Å—Ç `.env`:**

```ini
FLASK_APP=app.py
FLASK_ENV=production
SECRET_KEY=–≤–∞—à_—Å–µ–∫—Ä–µ—Ç–Ω–∏–π_–∫–ª—é—á_–∑–º—ñ–Ω—ñ—Ç—å_–π–æ–≥–æ
DATABASE_PATH=/app/data/database.db

```

> **–í–∞–∂–ª–∏–≤–æ:** `DATABASE_PATH` –º–∞—î –≤–∫–∞–∑—É–≤–∞—Ç–∏ –Ω–∞ `/app/data/database.db`, –æ—Å–∫—ñ–ª—å–∫–∏ —Å–∞–º–µ —Ç—É–¥–∏ –º–æ–Ω—Ç—É—î—Ç—å—Å—è Docker Volume.

###–ö—Ä–æ–∫ 3: –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤–í–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ Docker Compose –¥–ª—è –∑–±—ñ—Ä–∫–∏ —Ç–∞ –∑–∞–ø—É—Å–∫—É. –¶—è –∫–æ–º–∞–Ω–¥–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç—å Python-–æ–±—Ä–∞–∑, –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ —Ç–∞ –Ω–∞–ª–∞—à—Ç—É—î Nginx.

```bash
docker-compose up -d --build

```

* `-d`: –ó–∞–ø—É—Å–∫ —É —Ñ–æ–Ω–æ–≤–æ–º—É —Ä–µ–∂–∏–º—ñ (Detached).
* `--build`: –ü—Ä–∏–º—É—Å–æ–≤–∞ –ø–µ—Ä–µ–∑–±—ñ—Ä–∫–∞ –æ–±—Ä–∞–∑—ñ–≤ (–∫–æ—Ä–∏—Å–Ω–æ –ø—ñ—Å–ª—è –∑–º—ñ–Ω–∏ –∫–æ–¥—É).

###–ö—Ä–æ–∫ 4: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–æ–±–æ—Ç–∏–ü—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫—É –≤–µ–±–∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ –±—É–¥–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π –∑–∞ –∞–¥—Ä–µ—Å–æ—é:
üëâ **http://localhost:5000**

–ê–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—å –¥–æ—Å—Ç—É–ø–Ω–∞ –∑–∞ –∞–¥—Ä–µ—Å–æ—é:
üëâ **http://localhost:5000/manage** (–ü–∞—Ä–æ–ª—å: `0000`)

---

##‚òÅÔ∏è 3. –†–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –≤ Cloud (Railway)–Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –¥–ª—è —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ñ **Railway.app** (–∞–±–æ –∞–Ω–∞–ª–æ–≥–∞—Ö: Render, Heroku).

###–ö—Ä–æ–∫ 1: –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞–ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –≤–∞—à –∫–æ–¥ (–≤–∫–ª—é—á–∞—é—á–∏ `Dockerfile` —Ç–∞ `requirements.txt`) –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ –Ω–∞ GitHub.

###–ö—Ä–æ–∫ 2: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø—Ä–æ—î–∫—Ç—É –Ω–∞ Railway1. –ó–∞—Ä–µ—î—Å—Ç—Ä—É–π—Ç–µ—Å—è –Ω–∞ [Railway.app](https://railway.app/).
2. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **"New Project"** ‚Üí **"Deploy from GitHub repo"**.
3. –í–∏–±–µ—Ä—ñ—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π `StrayLike/vofk-opi-lab`.
4. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **"Deploy Now"**.

###–ö—Ä–æ–∫ 3: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω–Ω–∏—Ö (Variables)–ó–∞—Å—Ç–æ—Å—É–Ω–æ–∫ –Ω–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è –∫–æ—Ä–µ–∫—Ç–Ω–æ –±–µ–∑ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å –±–µ–∑–ø–µ–∫–∏.

1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å —É –≤–∫–ª–∞–¥–∫—É **Settings** (–∞–±–æ Variables) –≤–∞—à–æ–≥–æ —Å–µ—Ä–≤—ñ—Å—É.
2. –î–æ–¥–∞–π—Ç–µ –∑–º—ñ–Ω–Ω—ñ, –∞–Ω–∞–ª–æ–≥—ñ—á–Ω—ñ –≤–∞—à–æ–º—É `.env`:
* `FLASK_APP`: `app.py`
* `FLASK_ENV`: `production`
* `SECRET_KEY`: *(–ü—Ä–∏–¥—É–º–∞–π—Ç–µ —Å–∫–ª–∞–¥–Ω–∏–π –ø–∞—Ä–æ–ª—å)*
* `DATABASE_PATH`: `/app/data/database.db`



###–ö—Ä–æ–∫ 4: –í—ñ–¥–∫—Ä–∏—Ç—Ç—è –¥–æ—Å—Ç—É–ø—É1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å —É –≤–∫–ª–∞–¥–∫—É **Settings** ‚Üí **Networking**.
2. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ Port –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –Ω–∞ **5000**.
3. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **"Generate Domain"**, —â–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ –ø—É–±–ª—ñ—á–Ω–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `vofk-opi-lab.up.railway.app`).

> **‚ö†Ô∏è –ü–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è –ø—Ä–æ –ë–∞–∑—É –î–∞–Ω–∏—Ö (SQLite):**
> –ù–∞ –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–∏—Ö —Ç–∞—Ä–∏—Ñ–∞—Ö —Ö–º–∞—Ä–Ω–∏—Ö —Ö–æ—Å—Ç–∏–Ω–≥—ñ–≤ —Ñ–∞–π–ª–æ–≤–∞ —Å–∏—Å—Ç–µ–º–∞ —î **–µ—Ñ–µ–º–µ—Ä–Ω–æ—é**. –¶–µ –æ–∑–Ω–∞—á–∞—î, —â–æ –ø—Ä–∏ –∫–æ–∂–Ω–æ–º—É –Ω–æ–≤–æ–º—É –¥–µ–ø–ª–æ—ó (–æ–Ω–æ–≤–ª–µ–Ω–Ω—ñ –∫–æ–¥—É) —Ñ–∞–π–ª `database.db` –±—É–¥–µ —Å–∫–∏–¥–∞—Ç–∏—Å—è –¥–æ –ø–æ—á–∞—Ç–∫–æ–≤–æ–≥–æ —Å—Ç–∞–Ω—É.
> *–î–ª—è –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü—ñ—ó —Ü–µ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ, –∞–ª–µ –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É —Ä–µ–∫–æ–º–µ–Ω–¥—É—î—Ç—å—Å—è –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏ PostgreSQL.*

---

##üõ†Ô∏è 4. –ö–µ—Ä—É–≤–∞–Ω–Ω—è –î–∞–Ω–∏–º–∏ —Ç–∞ Docker###–Ø–∫ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ –ø—Ä–æ—î–∫—Ç?–Ø–∫—â–æ –≤–∏ –∑–º—ñ–Ω–∏–ª–∏ –∫–æ–¥ (Python/HTML):

```bash
docker-compose up -d --build

```

###–Ø–∫ –ø–æ–≤–Ω—ñ—Å—Ç—é –æ—á–∏—Å—Ç–∏—Ç–∏ –±–∞–∑—É –¥–∞–Ω–∏—Ö?–Ø–∫—â–æ –≤–∏ —Ö–æ—á–µ—Ç–µ –≤–∏–¥–∞–ª–∏—Ç–∏ –≤—Å—ñ —Ç–æ–≤–∞—Ä–∏ —Ç–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ —ñ –ø–æ—á–∞—Ç–∏ –∑ —á–∏—Å—Ç–æ–≥–æ –∞—Ä–∫—É—à–∞:

```bash
# –ó—É–ø–∏–Ω—è—î –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ –¢–ê –≤–∏–¥–∞–ª—è—î Volume –∑ –¥–∞–Ω–∏–º–∏
docker-compose down -v

# –ó–∞–ø—É—Å–∫–∞—î –∑–∞–Ω–æ–≤–æ (–ë–î —Å—Ç–≤–æ—Ä–∏—Ç—å—Å—è –∑ –Ω—É–ª—è)
docker-compose up -d --build

```

###–ü–µ—Ä–µ–≥–ª—è–¥ –ª–æ–≥—ñ–≤–Ø–∫—â–æ —â–æ—Å—å –Ω–µ –ø—Ä–∞—Ü—é—î, –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:

```bash
docker-compose logs -f web

```

---

##üì¶ 5. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Docker-–∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó* **`Dockerfile`**: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î Multi-stage build.
* *Stage 1:* –ö–æ–º–ø—ñ–ª—è—Ü—ñ—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π (`gcc`, `musl-dev`).
* *Stage 2:* –§—ñ–Ω–∞–ª—å–Ω–∏–π –ª–µ–≥–∫–∏–π –æ–±—Ä–∞–∑ –Ω–∞ –±–∞–∑—ñ Alpine Linux.


* **`docker-compose.yml`**:
* –û–ø–∏—Å—É—î —Å–µ—Ä–≤—ñ—Å `web`.
* –ú–æ–Ω—Ç—É—î —Ç–æ–º `sqlite_data` –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –ë–î.
* –ù–∞–ª–∞—à—Ç–æ–≤—É—î Healthcheck –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫—É —É —Ä–∞–∑—ñ –∑–±–æ—ó–≤.
