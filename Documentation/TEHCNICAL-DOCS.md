# üõ†Ô∏è –¢–µ—Ö–Ω—ñ—á–Ω–∞ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è: Stardew Valley Fan Hub

> **–í–µ—Ä—Å—ñ—è:** 1.0.0 (Release)
> **–¢–∏–ø:** Web Application (E-commerce & Fan Site)
> **–ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞:** Monolithic Flask App in Microservices Environment (Docker)

---

## 1. üèóÔ∏è –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –°–∏—Å—Ç–µ–º–∏

–ü—Ä–æ—î–∫—Ç —Ä–æ–∑—Ä–æ–±–ª–µ–Ω–æ —è–∫ –∫–ª–∞—Å–∏—á–Ω–∏–π –≤–µ–±–∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ –Ω–∞ –±–∞–∑—ñ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫—É Flask, —è–∫–∏–π —Ñ—É–Ω–∫—Ü—ñ–æ–Ω—É—î –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–æ–≤–∞–Ω–æ–≥–æ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ Docker. –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ —Å–ø—Ä–æ—î–∫—Ç–æ–≤–∞–Ω–∞ –¥–ª—è –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è –ª–µ–≥–∫–æ—Å—Ç—ñ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è (Deployment), –º–∞—Å—à—Ç–∞–±–æ–≤–∞–Ω–æ—Å—Ç—ñ —Ç–∞ —ñ–∑–æ–ª—è—Ü—ñ—ó –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤.

### 1.1. –î—ñ–∞–≥—Ä–∞–º–∞ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤ (Component Diagram)

```mermaid
graph TD
    Client[–ö–ª—ñ—î–Ω—Ç (–ë—Ä–∞—É–∑–µ—Ä)] -->|HTTP/HTTPS (Port 80/443)| Nginx[Nginx Reverse Proxy]
    
    subgraph Docker Network
        Nginx -->|Proxy Pass (Port 5000)| FlaskApp[Flask Backend (Gunicorn/Werkzeug)]
        
        FlaskApp -->|Read/Write| SQLite[(SQLite Database)]
        FlaskApp -->|Session Storage| SessionMem[In-Memory Session]
        
        subgraph "Application Logic"
            FlaskApp -->|Render| Jinja2[HTML Templates]
            FlaskApp -->|JSON| REST_API[REST API v1]
        end
    end
    
    SQLite -.->|Persisted Volume| HostFS[–§–∞–π–ª–æ–≤–∞ —Å–∏—Å—Ç–µ–º–∞ –•–æ—Å—Ç–∞]

```

###1.2. –û–ø–∏—Å –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—è | –û–ø–∏—Å —Ç–∞ –í—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ—Å—Ç—å |
| --- | --- | --- |
| **Web Server / Proxy** | **Nginx (Alpine)** | –ü—Ä–∏–π–º–∞—î –≤—Ö—ñ–¥–Ω—ñ –∑–∞–ø–∏—Ç–∏, –æ–±—Ä–æ–±–ª—è—î —Å—Ç–∞—Ç–∏–∫—É (–∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è, CSS) —Ç–∞ –ø—Ä–æ–∫—Å—É—î –¥–∏–Ω–∞–º—ñ—á–Ω—ñ –∑–∞–ø–∏—Ç–∏ –¥–æ Flask –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞. –ó–∞–±–µ–∑–ø–µ—á—É—î –±–µ–∑–ø–µ–∫—É —Ç–∞ –±–∞–ª–∞–Ω—Å—É–≤–∞–Ω–Ω—è –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è. |
| **Backend Core** | **Python 3.11 + Flask** | –û—Å–Ω–æ–≤–Ω–µ —è–¥—Ä–æ —Å–∏—Å—Ç–µ–º–∏. –û–±—Ä–æ–±–ª—è—î –±—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫—É, –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü—ñ—é (Routing), –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—é —Ç–∞ –≤–∑–∞—î–º–æ–¥—ñ—é –∑ –ë–î. |
| **Database** | **SQLite3** | –†–µ–ª—è—Ü—ñ–π–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —á–µ—Ä–µ–∑ –º–æ–¥—É–ª—å `sqlite3` –≤ Python. –î–∞–Ω—ñ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è —É —Ñ–∞–π–ª—ñ `database.db`, —è–∫–∏–π –º–æ–Ω—Ç—É—î—Ç—å—Å—è —á–µ—Ä–µ–∑ Docker Volume –¥–ª—è –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—ñ. |
| **Frontend** | **Jinja2 + Tailwind CSS** | –°–µ—Ä–≤–µ—Ä–Ω–∏–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ HTML —Å—Ç–æ—Ä—ñ–Ω–æ–∫. –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è Tailwind CSS —á–µ—Ä–µ–∑ CDN –¥–ª—è —à–≤–∏–¥–∫–æ—ó —Å—Ç–∏–ª—ñ–∑–∞—Ü—ñ—ó –±–µ–∑ —Å–∫–ª–∞–¥–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—É –∑–±—ñ—Ä–∫–∏ (build step). |
| **Admin Client** | **Vanilla JS (Fetch API)** | –ö–ª—ñ—î–Ω—Ç—Å—å–∫–∞ —á–∞—Å—Ç–∏–Ω–∞ –∞–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—ñ, —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–∞ —è–∫ SPA (Single Page Application). –í–∑–∞—î–º–æ–¥—ñ—î –∑ —Å–µ—Ä–≤–µ—Ä–æ–º –≤–∏–∫–ª—é—á–Ω–æ —á–µ—Ä–µ–∑ REST API. |

---

##2. üóÑÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–∞–∑–∏ –î–∞–Ω–∏—Ö (Database Schema)–ë–∞–∑–∞ –¥–∞–Ω–∏—Ö —Å–ø—Ä–æ—î–∫—Ç–æ–≤–∞–Ω–∞ –∑–∞ —Ä–µ–ª—è—Ü—ñ–π–Ω–æ—é –º–æ–¥–µ–ª–ª—é (ER-Model) —ñ –Ω–æ—Ä–º–∞–ª—ñ–∑–æ–≤–∞–Ω–∞ –¥–æ 3-—ó –Ω–æ—Ä–º–∞–ª—å–Ω–æ—ó —Ñ–æ—Ä–º–∏ (3NF).

###2.1. –°—Ö–µ–º–∞ –¢–∞–±–ª–∏—Ü—å (Entity Relationship)####`users` (–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ)–ó–±–µ—Ä—ñ–≥–∞—î –¥–∞–Ω—ñ –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó —Ç–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó.

* **`id`** `INTEGER PRIMARY KEY AUTOINCREMENT` ‚Äî –£–Ω—ñ–∫–∞–ª—å–Ω–∏–π —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä.
* **`username`** `TEXT NOT NULL UNIQUE` ‚Äî –õ–æ–≥—ñ–Ω –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.
* **`email`** `TEXT NOT NULL` ‚Äî –ï–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞ –ø–æ—à—Ç–∞.
* **`password`** `TEXT NOT NULL` ‚Äî –•–µ—à –ø–∞—Ä–æ–ª—è (PBKDF2/Scrypt format).
* **`role`** `TEXT DEFAULT 'user'` ‚Äî –†–æ–ª—å –¥–æ—Å—Ç—É–ø—É ('user' –∞–±–æ 'admin').

####`products` (–¢–æ–≤–∞—Ä–∏)–ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä—ñ–≤ –º–∞–≥–∞–∑–∏–Ω—É.

* **`id`** `INTEGER PRIMARY KEY AUTOINCREMENT`.
* **`name`** `TEXT NOT NULL` ‚Äî –ù–∞–∑–≤–∞ —Ç–æ–≤–∞—Ä—É.
* **`price`** `REAL NOT NULL` ‚Äî –¶—ñ–Ω–∞ –≤ –∑–æ–ª–æ—Ç—ñ (g).
* **`category`** `TEXT NOT NULL` ‚Äî –ö–∞—Ç–µ–≥–æ—Ä—ñ—è (–Ω–∞–ø—Ä., "–ù–∞—Å—ñ–Ω–Ω—è", "–ó–±—Ä–æ—è").
* **`image`** `TEXT NOT NULL` ‚Äî –®–ª—è—Ö –¥–æ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è (`/static/...`).

####`orders` (–ó–∞–º–æ–≤–ª–µ–Ω–Ω—è)–ó–∞–≥–æ–ª–æ–≤–∫–∏ –∑–∞–º–æ–≤–ª–µ–Ω—å.

* **`id`** `INTEGER PRIMARY KEY AUTOINCREMENT`.
* **`user_id`** `INTEGER NOT NULL` ‚Äî –ó–æ–≤–Ω—ñ—à–Ω—ñ–π –∫–ª—é—á –¥–æ `users.id`.
* **`total_price`** `REAL NOT NULL` ‚Äî –ó–∞–≥–∞–ª—å–Ω–∞ —Å—É–º–∞ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è.
* **`status`** `TEXT DEFAULT '–í –æ–±—Ä–æ–±—Ü—ñ'` ‚Äî –°—Ç–∞—Ç—É—Å –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è.
* **`created_at`** `TIMESTAMP DEFAULT CURRENT_TIMESTAMP`.

####`order_items` (–î–µ—Ç–∞–ª—ñ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è)–ü—Ä–æ–º—ñ–∂–Ω–∞ —Ç–∞–±–ª–∏—Ü—è –¥–ª—è —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó –∑–≤'—è–∑–∫—É Many-to-Many –º—ñ–∂ –ó–∞–º–æ–≤–ª–µ–Ω–Ω—è–º–∏ —Ç–∞ –¢–æ–≤–∞—Ä–∞–º–∏.

* **`id`** `INTEGER PRIMARY KEY AUTOINCREMENT`.
* **`order_id`** `INTEGER NOT NULL` ‚Äî FK –¥–æ `orders.id`.
* **`product_id`** `INTEGER NOT NULL` ‚Äî FK –¥–æ `products.id`.
* **`quantity`** `INTEGER DEFAULT 1` ‚Äî –ö—ñ–ª—å–∫—ñ—Å—Ç—å –æ–¥–∏–Ω–∏—Ü—å —Ç–æ–≤–∞—Ä—É.

####`feedback` (–í—ñ–¥–≥—É–∫–∏)* **`id`** `INTEGER PRIMARY KEY AUTOINCREMENT`.
* **`username`** `TEXT NOT NULL`.
* **`text`** `TEXT NOT NULL` ‚Äî –¢–µ–∫—Å—Ç –≤—ñ–¥–≥—É–∫—É.
* **`rating`** `INTEGER NOT NULL` ‚Äî –û—Ü—ñ–Ω–∫–∞ (1-5).
* **`created_at`** `TIMESTAMP`.

---

##3. üîå API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è (RESTful Interface)–í—Å—ñ API –∑–∞–ø–∏—Ç–∏ –≤–∏–∫–æ–Ω—É—é—Ç—å—Å—è –∑–∞ –ø—Ä–µ—Ñ—ñ–∫—Å–æ–º: `/api/v1`.
–§–æ—Ä–º–∞—Ç –æ–±–º—ñ–Ω—É –¥–∞–Ω–∏–º–∏: **JSON**.

###3.1. –¢–æ–≤–∞—Ä–∏ (Products Resource)| –ú–µ—Ç–æ–¥ | URL | –û–ø–∏—Å | –¢—ñ–ª–æ –∑–∞–ø–∏—Ç—É / –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ | –í—ñ–¥–ø–æ–≤—ñ–¥—å |
| --- | --- | --- | --- | --- |
| `GET` | `/products` | –û—Ç—Ä–∏–º–∞—Ç–∏ —Å–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä—ñ–≤ | Query: `?category=Name` (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ) | `200 OK` `[JSON Array]` |
| `POST` | `/products` | –°—Ç–≤–æ—Ä–∏—Ç–∏ —Ç–æ–≤–∞—Ä | `{ "name": "...", "price": 100, "category": "...", "image": "..." }` | `201 Created` |
| `DELETE` | `/products/<id>` | –í–∏–¥–∞–ª–∏—Ç–∏ —Ç–æ–≤–∞—Ä | URL Parameter: `id` | `200 OK` –∞–±–æ `404/403` |

###3.2. –ó–∞–º–æ–≤–ª–µ–Ω–Ω—è (Orders Resource)| –ú–µ—Ç–æ–¥ | URL | –û–ø–∏—Å | –¢—ñ–ª–æ –∑–∞–ø–∏—Ç—É | –í—ñ–¥–ø–æ–≤—ñ–¥—å |
| --- | --- | --- | --- | --- |
| `GET` | `/orders` | –û—Ç—Ä–∏–º–∞—Ç–∏ –≤—Å—ñ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è | - | `200 OK` `[JSON Array]` |
| `POST` | `/orders` | –°—Ç–≤–æ—Ä–∏—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è | `{ "username": "...", "email": "...", "items": [{"product_id": 1, "quantity": 2}] }` | `201 Created` |

###3.3. –í—ñ–¥–≥—É–∫–∏ (Feedback Resource)| –ú–µ—Ç–æ–¥ | URL | –û–ø–∏—Å | –¢—ñ–ª–æ –∑–∞–ø–∏—Ç—É | –í—ñ–¥–ø–æ–≤—ñ–¥—å |
| --- | --- | --- | --- | --- |
| `GET` | `/feedback` | –°–ø–∏—Å–æ–∫ –≤—ñ–¥–≥—É–∫—ñ–≤ | - | `200 OK` |
| `POST` | `/feedback` | –î–æ–¥–∞—Ç–∏ –≤—ñ–¥–≥—É–∫ | `{ "username": "...", "text": "...", "rating": 5 }` | `201 Created` |
| `DELETE` | `/feedback/<id>` | –í–∏–¥–∞–ª–∏—Ç–∏ –≤—ñ–¥–≥—É–∫ | - | `200 OK` |

###3.4. –°–∏—Å—Ç–µ–º–Ω—ñ (System)* **`GET /health`**: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è Docker Healthcheck. –ü–µ—Ä–µ–≤—ñ—Ä—è—î –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –ë–î (`SELECT 1`). –ü–æ–≤–µ—Ä—Ç–∞—î `200 OK`, —è–∫—â–æ —Å–∏—Å—Ç–µ–º–∞ –∑–¥–æ—Ä–æ–≤–∞.

---

##4. üíª –ö–ª—ñ—î–Ω—Ç—Å—å–∫–∞ –õ–æ–≥—ñ–∫–∞ (Frontend Logic)###4.1. –õ–æ–≥—ñ–∫–∞ –ö–æ—à–∏–∫–∞ (Session Based Cart)–ö–æ—à–∏–∫ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω—ñ —Å–µ—Ä–≤–µ—Ä–∞ –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º Flask Session.

* **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–∏—Ö:** –°–ª–æ–≤–Ω–∏–∫ (Dictionary) –≤–∏–≥–ª—è–¥—É `{'product_id': quantity}`.
* **–î–æ–¥–∞–≤–∞–Ω–Ω—è:** –ü—Ä–∏ –¥–æ–¥–∞–≤–∞–Ω–Ω—ñ –ø–µ—Ä–µ–≤—ñ—Ä—è—î—Ç—å—Å—è, —á–∏ —î –∫–ª—é—á (ID) —É —Å–ª–æ–≤–Ω–∏–∫—É. –Ø–∫—â–æ —Ç–∞–∫ ‚Äî —ñ–Ω–∫—Ä–µ–º–µ–Ω—Ç—É—î—Ç—å—Å—è –∑–Ω–∞—á–µ–Ω–Ω—è, —è–∫—â–æ –Ω—ñ ‚Äî —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –∑–∞–ø–∏—Å = 1.
* **–í–∏–¥–∞–ª–µ–Ω–Ω—è/–ó–º–µ–Ω—à–µ–Ω–Ω—è:**
* –Ø–∫—â–æ `quantity > 1` -> –¥–µ–∫—Ä–µ–º–µ–Ω—Ç.
* –Ø–∫—â–æ `quantity == 1` -> –≤–∏–¥–∞–ª–µ–Ω–Ω—è –∫–ª—é—á–∞ –∑—ñ —Å–ª–æ–≤–Ω–∏–∫–∞ (`pop`).


* **–ü—ñ–¥—Ä–∞—Ö—É–Ω–æ–∫:** –ó–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ç–æ–≤–∞—Ä—ñ–≤ —É —à–∞–ø—Ü—ñ —Å–∞–π—Ç—É –æ–±—á–∏—Å–ª—é—î—Ç—å—Å—è —á–µ—Ä–µ–∑ `sum(session['cart'].values())`.

###4.2. –ê–¥–º—ñ–Ω-–ü–∞–Ω–µ–ª—å (SPA Implementation)–°—Ç–æ—Ä—ñ–Ω–∫–∞ `/manage` –ø—Ä–∞—Ü—é—î —è–∫ –æ–¥–Ω–æ—Å—Ç–æ—Ä—ñ–Ω–∫–æ–≤–∏–π –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫.

* **–ë–µ–∑ –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è:** –í—Å—ñ –¥—ñ—ó (–¥–æ–¥–∞–≤–∞–Ω–Ω—è —Ç–æ–≤–∞—Ä—É, –≤–∏–¥–∞–ª–µ–Ω–Ω—è) –≤—ñ–¥–±—É–≤–∞—é—Ç—å—Å—è —á–µ—Ä–µ–∑ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ñ `fetch()` –∑–∞–ø–∏—Ç–∏.
* **–î–∏–Ω–∞–º—ñ—á–Ω–∏–π DOM:** JavaScript –æ—Ç—Ä–∏–º—É—î JSON –≤—ñ–¥ API —Ç–∞ –≥–µ–Ω–µ—Ä—É—î HTML-–∫–∞—Ä—Ç–∫–∏ —Ç–æ–≤–∞—Ä—ñ–≤/–∑–∞–º–æ–≤–ª–µ–Ω—å "–Ω–∞ –ª—å–æ—Ç—É".
* **–ë–µ–∑–ø–µ–∫–∞ (Demo):** –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –∑–∞—Ö–∏—Å—Ç –≤—Ö–æ–¥—É —á–µ—Ä–µ–∑ `Passcode` (–∑–Ω–∞—á–µ–Ω–Ω—è `0000`), —â–æ –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ —Å–µ—Å—ñ—ó (`session['admin_access'] = True`). –¶–µ –¥–æ–∑–≤–æ–ª—è—î –¥–µ–º–æ–Ω—Å—Ç—Ä—É–≤–∞—Ç–∏ –∞–¥–º—ñ–Ω–∫—É –Ω–∞–≤—ñ—Ç—å –ø—Ä–∏ —Å–∫–∏–¥–∞–Ω–Ω—ñ –ë–î –Ω–∞ –µ—Ñ–µ–º–µ—Ä–Ω–∏—Ö —Ö–æ—Å—Ç–∏–Ω–≥–∞—Ö.

---

##5. üõ°Ô∏è –ë–µ–∑–ø–µ–∫–∞ —Ç–∞ –ó–∞—Ö–∏—Å—Ç –î–∞–Ω–∏—Ö1. **–•–µ—à—É–≤–∞–Ω–Ω—è –ü–∞—Ä–æ–ª—ñ–≤:**
* –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ `Werkzeug.security`.
* –ê–ª–≥–æ—Ä–∏—Ç–º: `generate_password_hash` (–∑–∞–∑–≤–∏—á–∞–π `scrypt` –∞–±–æ `pbkdf2:sha256` –∑ —Å—ñ–ª–ª—é).
* –ü–∞—Ä–æ–ª—ñ –Ω—ñ–∫–æ–ª–∏ –Ω–µ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è —É –≤—ñ–¥–∫—Ä–∏—Ç–æ–º—É –≤–∏–≥–ª—è–¥—ñ.


2. **–ó–∞—Ö–∏—Å—Ç –ú–∞—Ä—à—Ä—É—Ç—ñ–≤:**
* –î–µ–∫–æ—Ä–∞—Ç–æ—Ä `@login_required` –ø–µ—Ä–µ–≤—ñ—Ä—è—î –Ω–∞—è–≤–Ω—ñ—Å—Ç—å `user_id` –≤ —Å–µ—Å—ñ—ó –ø–µ—Ä–µ–¥ –¥–æ—Å—Ç—É–ø–æ–º –¥–æ –∑–∞—Ö–∏—â–µ–Ω–∏—Ö —Å—Ç–æ—Ä—ñ–Ω–æ–∫ (`/checkout`, `/logout`).
* API endpoints, —â–æ –∑–º—ñ–Ω—é—é—Ç—å –¥–∞–Ω—ñ (`POST`, `DELETE`), –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø—É (–≤ –¥–µ–º–æ-–≤–µ—Ä—Å—ñ—ó —Å–ø—Ä–æ—â–µ–Ω–æ –¥–ª—è –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü—ñ—ó).


3. **–Ü–∑–æ–ª—è—Ü—ñ—è –°–µ—Ä–µ–¥–æ–≤–∏—â–∞:**
* –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `.env` —Ñ–∞–π–ª—ñ–≤ –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è `SECRET_KEY` —Ç–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å –ë–î.
* `SECRET_KEY` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ—ñ—á–Ω–æ–≥–æ –ø—ñ–¥–ø–∏—Å—É —Å–µ—Å—ñ–π–Ω–∏—Ö –∫—É–∫—ñ.



---

##6. üöÄ –î–µ–ø–ª–æ–π–º–µ–Ω—Ç —Ç–∞ –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è (Docker)–ü—Ä–æ—î–∫—Ç –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î **Multi-stage build** –¥–ª—è –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó —Ä–æ–∑–º—ñ—Ä—É Docker-–æ–±—Ä–∞–∑—É.

###Dockerfile Workflow:1. **Stage 1 (Builder):**
* –ë–∞–∑–æ–≤–∏–π –æ–±—Ä–∞–∑ `python:3.11-alpine`.
* –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–æ–º–ø—ñ–ª—è—Ç–æ—Ä—ñ–≤ (`gcc`, `musl-dev`) –¥–ª—è –∑–±—ñ—Ä–∫–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π.
* –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è Python-–ø–∞–∫–µ—Ç—ñ–≤ (`pip install`).


2. **Stage 2 (Final):**
* –ö–æ–ø—ñ—é–≤–∞–Ω–Ω—è –ª–∏—à–µ —Å–∫–æ–º–ø—ñ–ª—å–æ–≤–∞–Ω–∏—Ö –±—ñ–±–ª—ñ–æ—Ç–µ–∫ –∑ Stage 1.
* –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è `curl` –¥–ª—è Healthcheck.
* –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (–±–µ–∑–ø–µ–∫–∞) —Ç–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ–π.
* –ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫—É `app.py`.



###Docker Compose:* –û—Ä–∫–µ—Å—Ç—Ä—É—î —Å–µ—Ä–≤—ñ—Å `web`.
* –ú–æ–Ω—Ç—É—î **Named Volume** `sqlite_data` –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é `/app/data` –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞. –¶–µ –≥–∞—Ä–∞–Ω—Ç—É—î, —â–æ —Ñ–∞–π–ª –±–∞–∑–∏ –¥–∞–Ω–∏—Ö –Ω–µ –∑–Ω–∏–∫–Ω–µ –ø—ñ—Å–ª—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.
* –í–∏–∑–Ω–∞—á–∞—î **Healthcheck**, —è–∫–∏–π –∫–æ–∂–Ω—ñ 30 —Å–µ–∫—É–Ω–¥ –æ–ø–∏—Ç—É—î `/api/v1/health`.

```

```